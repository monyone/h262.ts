export const macroblock_address_increment_table = [
  [0b1,           1],
  [0b011,         3],
  [0b010,         3],
  [0b0011,        4],
  [0b0010,        4],
  [0b00011,       5],
  [0b00010,       5],
  [0b0000111,     7],
  [0b0000110,     7],
  [0b00001011,    8],
  [0b00001010,    8],
  [0b00001001,    8],
  [0b00001000,    8],
  [0b00000111,    8],
  [0b00000110,    8],
  [0b0000010111,  10],
  [0b0000010110,  10],
  [0b0000010101,  10],
  [0b0000010100,  10],
  [0b0000010011,  10],
  [0b0000010010,  10],
  [0b00000100011, 11],
  [0b00000100010, 11],
  [0b00000100001, 11],
  [0b00000100000, 11],
  [0b00000011111, 11],
  [0b00000011110, 11],
  [0b00000011101, 11],
  [0b00000011100, 11],
  [0b00000011011, 11],
  [0b00000011010, 11],
  [0b00000011001, 11],
  [0b00000011000, 11],
  [0b00000010000, 11],
];

export const macroblock_type_tables = [
  [],
  [
    // I
    [0b1,  1],
    [0b01, 2],
  ],
  [
    // P
    [0b1,      1],
    [0b01,     2],
    [0b001,    3],
    [0b00011,  5],
    [0b00010,  5],
    [0b00001,  5],
    [0b000001, 6],
  ],
  [
    // B
    [0b10,     2],
    [0b11,     2],
    [0b010,    3],
    [0b011,    3],
    [0b0010,   4],
    [0b0011,   4],
    [0b00011,  5],
    [0b00010,  5],
    [0b000011, 6],
    [0b000010, 6],
    [0b000001, 6],
  ],
  [],
  [],
  [],
  [],
];

export const coded_block_pattern_table = [
  [0b111,       3, 60],
  [0b1101,      4,  4],
  [0b1100,      4,  8],
  [0b1011,      4, 16],
  [0b1010,      4, 32],
  [0b10011,     5, 12],
  [0b10010,     5, 48],
  [0b10001,     5, 20],
  [0b10000,     5, 40],
  [0b01111,     5, 28],
  [0b01110,     5, 44],
  [0b01101,     5, 52],
  [0b01100,     5, 56],
  [0b01011,     5,  1],
  [0b01010,     5, 61],
  [0b01001,     5,  2],
  [0b01000,     5, 62],
  [0b001111,    6, 24],
  [0b001110,    6, 36],
  [0b001101,    6,  3],
  [0b001100,    6, 63],
  [0b0010111,   7,  5],
  [0b0010110,   7,  9],
  [0b0010101,   7, 17],
  [0b0010100,   7, 33],
  [0b0010011,   7,  6],
  [0b0010010,   7, 10],
  [0b0010001,   7, 18],
  [0b0010000,   7, 34],
  [0b00011111,  8,  7],
  [0b00011110,  8, 11],
  [0b00011101,  8, 19],
  [0b00011100,  8, 35],
  [0b00011011,  8, 13],
  [0b00011010,  8, 49],
  [0b00011001,  8, 21],
  [0b00011000,  8, 41],
  [0b00010111,  8, 14],
  [0b00010110,  8, 50],
  [0b00010101,  8, 22],
  [0b00010100,  8, 42],
  [0b00010011,  8, 15],
  [0b00010010,  8, 51],
  [0b00010001,  8, 23],
  [0b00010000,  8, 43],
  [0b00001111,  8, 25],
  [0b00001110,  8, 37],
  [0b00001101,  8, 26],
  [0b00001100,  8, 38],
  [0b00001011,  8, 29],
  [0b00001010,  8, 45],
  [0b00001001,  8, 53],
  [0b00001000,  8, 57],
  [0b00000111,  8, 30],
  [0b00000110,  8, 46],
  [0b00000101,  8, 54],
  [0b00000100,  8, 58],
  [0b000000111, 9, 31],
  [0b000000110, 9, 47],
  [0b000000101, 9, 55],
  [0b000000100, 9, 59],
  [0b000000011, 9, 27],
  [0b000000010, 9, 39],
  [0b000000001, 9,  0],
];

export const motion_code_table = [
  [0b00000011001, 11, -16],
  [0b00000011011, 11, -15],
  [0b00000011101, 11, -14],
  [0b00000011111, 11, -13],
  [0b00000100001, 11, -12],
  [0b00000100011, 11, -11],
  [0b0000010011,  10, -10],
  [0b0000010101,  10,  -9],
  [0b0000010111,  10,  -8],
  [0b00000111,     8,  -7],
  [0b00001001,     8,  -6],
  [0b00001011,     8,  -5],
  [0b0000111,      7,  -4],
  [0b00011,        5,  -3],
  [0b0011,         4,  -2],
  [0b011,          3,  -1],
  [0b1,            1,   0],
  [0b010,          3,   1],
  [0b0010,         4,   2],
  [0b00010,        5,   3],
  [0b0000110,      7,   4],
  [0b00001010,     8,   5],
  [0b00001000,     8,   6],
  [0b00000110,     8,   7],
  [0b0000010110,  10,   8],
  [0b0000010100,  10,   9],
  [0b0000010010,  10,  10],
  [0b00000100010, 11,  11],
  [0b00000100000, 11,  12],
  [0b00000011110, 11,  13],
  [0b00000011100, 11,  14],
  [0b00000011010, 11,  15],
  [0b00000011000, 11,  16],
];

export const dmvector_table = [
  [0b11, 2, -1],
  [0b0,  1,  0],
  [0b10, 2,  1],
];

export const dct_dc_size_luminance_table = [
  [0b100,       3],
  [0b00,        2],
  [0b01,        2],
  [0b101,       3],
  [0b110,       3],
  [0b1110,      4],
  [0b11110,     5],
  [0b111110,    6],
  [0b1111110,   7],
  [0b11111110,  8],
  [0b111111110, 9],
  [0b111111111, 9],
];

export const dct_dc_size_chrominance_table = [
  [0b00,          2],
  [0b01,          2],
  [0b10,          2],
  [0b110,         3],
  [0b1110,        4],
  [0b11110,       5],
  [0b111110,      6],
  [0b1111110,     7],
  [0b11111110,    8],
  [0b111111110,   9],
  [0b1111111110, 10],
  [0b1111111111, 10],
];

export type DCTCefficientsParams = {
  run: number,
  level: number
  escape?: boolean
  eob?: boolean,
};
const dct_coefficients_zero_table: [number, number, DCTCefficientsParams][] = [
  [0b011,               3, { run:  1, level:  1}],
  [0b0100,              4, { run:  0, level:  2}],
  [0b0101,              4, { run:  2, level:  1}],
  [0b00101,             5, { run:  0, level:  3}],
  [0b00111,             5, { run:  3, level:  1}],
  [0b00110,             5, { run:  4, level:  1}],
  [0b000110,            6, { run:  1, level:  2}],
  [0b000111,            6, { run:  5, level:  1}],
  [0b000101,            6, { run:  6, level:  1}],
  [0b000100,            6, { run:  7, level:  1}],
  [0b0000110,           7, { run:  0, level:  4}],
  [0b0000100,           7, { run:  2, level:  2}],
  [0b0000111,           7, { run:  8, level:  1}],
  [0b0000101,           7, { run:  9, level:  1}],
  [0b000001,            6, { run: Number.NaN, level: Number.NaN, escape: true}],
  [0b00100110,          8, { run:  0, level:  5}],
  [0b00100001,          8, { run:  0, level:  6}],
  [0b00100101,          8, { run:  1, level:  3}],
  [0b00100100,          8, { run:  3, level:  2}],
  [0b00100111,          8, { run: 10, level:  1}],
  [0b00100011,          8, { run: 11, level:  1}],
  [0b00100010,          8, { run: 12, level:  1}],
  [0b00100000,          8, { run: 13, level:  1}],
  [0b0000001010,       10, { run:  0, level:  7}],
  [0b0000001100,       10, { run:  1, level:  4}],
  [0b0000001011,       10, { run:  2, level:  3}],
  [0b0000001111,       10, { run:  4, level:  2}],
  [0b0000001001,       10, { run:  5, level:  2}],
  [0b0000001110,       10, { run: 14, level:  1}],
  [0b0000001101,       10, { run: 15, level:  1}],
  [0b0000001000,       10, { run: 16, level:  1}],
  [0b000000011101,     12, { run:  0, level:  8}],
  [0b000000011000,     12, { run:  0, level:  9}],
  [0b000000010011,     12, { run:  0, level: 10}],
  [0b000000010000,     12, { run:  0, level: 11}],
  [0b000000011011,     12, { run:  1, level:  5}],
  [0b000000010100,     12, { run:  2, level:  4}],
  [0b000000011100,     12, { run:  3, level:  3}],
  [0b000000010010,     12, { run:  4, level:  3}],
  [0b000000011110,     12, { run:  6, level:  2}],
  [0b000000010101,     12, { run:  7, level:  2}],
  [0b000000010001,     12, { run:  8, level:  2}],
  [0b000000011111,     12, { run: 17, level:  1}],
  [0b000000011010,     12, { run: 18, level:  1}],
  [0b000000011001,     12, { run: 19, level:  1}],
  [0b000000010111,     12, { run: 20, level:  1}],
  [0b000000010110,     12, { run: 21, level:  1}],
  [0b0000000011010,    13, { run:  0, level: 12}],
  [0b0000000011001,    13, { run:  0, level: 13}],
  [0b0000000011000,    13, { run:  0, level: 14}],
  [0b0000000010111,    13, { run:  0, level: 15}],
  [0b0000000010110,    13, { run:  1, level:  6}],
  [0b0000000010101,    13, { run:  1, level:  7}],
  [0b0000000010100,    13, { run:  2, level:  5}],
  [0b0000000010011,    13, { run:  3, level:  4}],
  [0b0000000010010,    13, { run:  5, level:  3}],
  [0b0000000010001,    13, { run:  9, level:  2}],
  [0b0000000010000,    13, { run: 10, level:  2}],
  [0b0000000011111,    13, { run: 22, level:  1}],
  [0b0000000011110,    13, { run: 23, level:  1}],
  [0b0000000011101,    13, { run: 24, level:  1}],
  [0b0000000011100,    13, { run: 25, level:  1}],
  [0b0000000011011,    13, { run: 26, level:  1}],
  [0b00000000011111,   14, { run:  0, level: 16}],
  [0b00000000011110,   14, { run:  0, level: 17}],
  [0b00000000011101,   14, { run:  0, level: 18}],
  [0b00000000011100,   14, { run:  0, level: 19}],
  [0b00000000011011,   14, { run:  0, level: 20}],
  [0b00000000011010,   14, { run:  0, level: 21}],
  [0b00000000011001,   14, { run:  0, level: 22}],
  [0b00000000011000,   14, { run:  0, level: 23}],
  [0b00000000010111,   14, { run:  0, level: 24}],
  [0b00000000010110,   14, { run:  0, level: 25}],
  [0b00000000010101,   14, { run:  0, level: 26}],
  [0b00000000010100,   14, { run:  0, level: 27}],
  [0b00000000010011,   14, { run:  0, level: 28}],
  [0b00000000010010,   14, { run:  0, level: 29}],
  [0b00000000010001,   14, { run:  0, level: 30}],
  [0b00000000010000,   14, { run:  0, level: 31}],
  [0b000000000011000,  15, { run:  0, level: 32}],
  [0b000000000010111,  15, { run:  0, level: 33}],
  [0b000000000010110,  15, { run:  0, level: 34}],
  [0b000000000010101,  15, { run:  0, level: 35}],
  [0b000000000010100,  15, { run:  0, level: 36}],
  [0b000000000010011,  15, { run:  0, level: 37}],
  [0b000000000010010,  15, { run:  0, level: 38}],
  [0b000000000010001,  15, { run:  0, level: 39}],
  [0b000000000010000,  15, { run:  0, level: 40}],
  [0b000000000011111,  15, { run:  1, level:  8}],
  [0b000000000011110,  15, { run:  1, level:  9}],
  [0b000000000011101,  15, { run:  1, level: 10}],
  [0b000000000011100,  15, { run:  1, level: 11}],
  [0b000000000011011,  15, { run:  1, level: 12}],
  [0b000000000011010,  15, { run:  1, level: 13}],
  [0b000000000011001,  15, { run:  1, level: 14}],
  [0b0000000000010011, 16, { run:  1, level: 15}],
  [0b0000000000010010, 16, { run:  1, level: 16}],
  [0b0000000000010001, 16, { run:  1, level: 17}],
  [0b0000000000010000, 16, { run:  1, level: 18}],
  [0b0000000000010100, 16, { run:  6, level:  3}],
  [0b0000000000011010, 16, { run: 11, level:  2}],
  [0b0000000000011001, 16, { run: 12, level:  2}],
  [0b0000000000011000, 16, { run: 13, level:  2}],
  [0b0000000000010111, 16, { run: 14, level:  2}],
  [0b0000000000010110, 16, { run: 15, level:  2}],
  [0b0000000000010101, 16, { run: 16, level:  2}],
  [0b0000000000011111, 16, { run: 27, level:  1}],
  [0b0000000000011110, 16, { run: 28, level:  1}],
  [0b0000000000011101, 16, { run: 29, level:  1}],
  [0b0000000000011100, 16, { run: 30, level:  1}],
  [0b0000000000011011, 16, { run: 31, level:  1}],
];
export const dct_coefficients_zero_dc_table: [number, number, DCTCefficientsParams][] = [
  [0b1, 1, { run: 0, level: 1 }],
  ... dct_coefficients_zero_table
];
export const dct_coefficients_zero_other_table: [number, number, DCTCefficientsParams][] = [
  [0b10, 2, { run: Number.NaN, level: Number.NaN, eob: true }],
  [0b11, 2, { run: 0, level: 1 }],
  ... dct_coefficients_zero_table
]